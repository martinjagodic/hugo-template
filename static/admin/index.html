<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Content Manager</title>
    <!-- Include the script that enables Netlify Identity on this page. -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </head>
  <body>
    <!-- Include the script that builds the page and powers Netlify CMS -->
    <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
    <!-- Add editor components for Hugo shortcodes -->
    <script src="https://sharadcodes.github.io/hugo-shortcodes-netlify-cms/dist/hugo_shortcodes_netlify_cms.js"></script>


    <script>
      CMS.registerEditorComponent({
        id: "button",
        label: "Button",
        fields: [
          {name: 'inner', label: 'Text', widget: 'string'},
          {name: 'href', label: 'Link', widget: 'string'},
          {name: 'target', label: 'Target', widget: 'string'},
          {name: 'extraClass', label: 'Class', widget: 'string'}
        ],
        pattern: /{{< button href="(.*)" target="(.*)" extraClass="(.*)" >}}(.*){{< \/button >}}/,
        fromBlock: function(match) {
          return {
            href: match[1],
            target: match[2],
            extraClass: match[3],
            inner: match[4]
          };
        },
        toBlock: function(obj) {
          return `{{< button href="${obj.href}" target="${obj.target}" extraClass="${obj.extraClass}" >}}${obj.inner}{{< /button >}}`;
        },
        toPreview: function(obj) {
          return (
            `<a href="${obj.href}" target="${obj.target}" class="button ${obj.extraClass}">${obj.inner}</a>`
          );
        }
      });
      </script>

  </body>
</html>
